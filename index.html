<!DOCTYPE html><!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üç† UbeStudy - Professional Mode</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    :root { --ube: #957DAD; --dark: #4A148C; --bg: #F8F9FE; --white: #ffffff; }
    * { box-sizing: border-box; font-family: 'Nunito', sans-serif; }
    body { background: var(--bg); margin: 0; min-height: 100vh; display: flex; justify-content: center; align-items: center; }

    /* Layout Transitions */
    .view { display: none; width: 100%; max-width: 500px; padding: 20px; animation: slideUp 0.4s ease; }
    .view.active { display: flex; flex-direction: column; }
    @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

    .card { background: var(--white); padding: 30px; border-radius: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.03); width: 100%; }
    
    /* Subject Grid - 6 Subjects */
    .subject-grid { 
        display: grid; 
        grid-template-columns: 1fr 1fr; 
        gap: 15px; 
        width: 100%; 
        margin-top: 20px; 
    }
    .subject-tile { 
        background: var(--white); 
        padding: 20px; 
        border-radius: 20px; 
        border: 2px solid #F1F2F6; 
        cursor: pointer; 
        text-align: center;
        transition: 0.3s;
    }
    .subject-tile i { font-size: 24px; color: var(--ube); margin-bottom: 10px; }
    .subject-tile:hover { border-color: var(--ube); transform: scale(1.03); }
    .subject-tile h4 { margin: 0; font-size: 14px; color: var(--dark); }

    /* Quiz Styling */
    .progress-bar { width: 100%; height: 10px; background: #eee; border-radius: 10px; margin: 15px 0; overflow: hidden; }
    .progress-fill { height: 100%; background: var(--ube); width: 0%; transition: 0.4s; }
    
    .opt { 
        background: #F8F9FE; padding: 18px; border-radius: 15px; margin: 12px 0; 
        cursor: pointer; font-weight: 700; border: 2px solid #EAECEF; transition: 0.2s;
    }
    .opt:hover { border-color: var(--ube); background: #fdfbff; }
    .correct { background: #55E6C1 !important; color: white; border-color: #55E6C1; }
    .wrong { background: #FF7675 !important; color: white; border-color: #FF7675; }

    button.primary { 
        width: 100%; padding: 18px; border: none; border-radius: 18px; 
        background: var(--dark); color: white; font-weight: 800; cursor: pointer;
    }
    .hidden { display: none; }
</style>
</head>
<body>

<div id="view-auth" class="view active">
    <div class="card" style="text-align:center;">
        <h1>üç† UbeStudy</h1>
        <p>Login to your study dashboard</p>
        <input type="email" id="email" placeholder="Email" style="width:100%; padding:15px; margin:10px 0; border-radius:12px; border:1px solid #ddd;">
        <input type="password" id="password" placeholder="Password" style="width:100%; padding:15px; margin:10px 0; border-radius:12px; border:1px solid #ddd;">
        <button class="primary" onclick="app.handleAuth()">Continue Study</button>
        <div id="status" style="margin-top:15px;"></div>
    </div>
</div>

<div id="view-dash" class="view">
    <h1 style="color:var(--dark)">Welcome Back!</h1>
    <p style="color:#636E72;">Choose a subject to master today:</p>
    
    <div class="subject-grid">
        <div class="subject-tile" onclick="app.start('Animal Science')">
            <i class="fa-solid fa-piggy-bank"></i><h4>Animal Science</h4>
        </div>
        <div class="subject-tile" onclick="app.start('Crop Science')">
            <i class="fa-solid fa-seedling"></i><h4>Crop Science</h4>
        </div>
        <div class="subject-tile" onclick="app.start('Math')">
            <i class="fa-solid fa-calculator"></i><h4>Mathematics</h4>
        </div>
        <div class="subject-tile" onclick="app.start('Social Science')">
            <i class="fa-solid fa-earth-americas"></i><h4>Social Science</h4>
        </div>
        <div class="subject-tile" onclick="app.start('English')">
            <i class="fa-solid fa-book"></i><h4>English / Lit</h4>
        </div>
        <div class="subject-tile" onclick="app.start('Agri-Econ')">
            <i class="fa-solid fa-chart-line"></i><h4>Agri-Economics</h4>
        </div>
    </div>
    
    <button onclick="app.logout()" style="margin-top:25px; background:none; border:none; color:#B2BEC3; cursor:pointer; font-weight:700;">Sign Out</button>
</div>

<div id="view-study" class="view">
    <div class="card">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <span id="active-subject" style="font-weight:800; color:var(--ube); text-transform:uppercase; font-size:12px;">SUBJECT</span>
            <span id="xp-counter" style="font-weight:800; color:var(--dark);">XP: 0</span>
        </div>
        <div class="progress-bar"><div id="p-fill" class="progress-fill"></div></div>
        
        <h2 id="q-text" style="font-size:1.3rem; line-height:1.4; margin: 20px 0;">Question loading...</h2>
        <div id="options-container"></div>
    </div>
    <button onclick="app.showView('view-dash')" style="margin-top:20px; background:none; border:none; color:#B2BEC3; cursor:pointer;">Quit Session</button>
</div>

<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";

const SUPABASE_URL = "https://tbftpvkydneckzdpfdev.supabase.co";
const SUPABASE_KEY = "sb_publishable_lhz46yyiSbTUb-9ksd9umA_vQJIdl3Q";
const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);
